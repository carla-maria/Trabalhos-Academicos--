CREATE TABLE TIPO 
(CODIGO INTEGER PRIMARY KEY, 
DESCRICAO VARCHAR(50));


CREATE TABLE FABRICANTE 
(CODIGO INTEGER PRIMARY KEY,
 RAZAO_SOCIAL VARCHAR (50),
 CNPJ VARCHAR(11),
 TELFIXO VARCHAR(8),
 FAX VARCHAR(10),
 UF CHAR(2) DEFAULT 'RJ');


	CREATE TABLE PRODUTO
(CODIGO INTEGER PRIMARY KEY,
NOME VARCHAR(50),
DESCRICAO VARCHAR(50),
DATA_VALIDADE DATE,
NUM_FABRICANTE INTEGER,
COD_TIPO INTEGER,
VALOR FLOAT(10),

FOREIGN KEY (NUM_FABRICANTE) 
REFERENCES FABRICANTE(CODIGO)
ON DELETE SET NULL ON UPDATE CASCADE,

FOREIGN KEY (COD_TIPO)
REFERENCES TIPO(CODIGO)
ON DELETE SET NULL ON UPDATE CASCADE);



	CREATE TABLE PRODUTO_POR_FABRICANTE
(NÚMERO INTEGER PRIMARY KEY,
NUM_FABRICANTE INTEGER,
VALOR FLOAT(10),

FOREIGN KEY (NUM_FABRICANTE) 
REFERENCES FABRICANTE(CODIGO) 
ON DELETE SET NULL ON UPDATE CASCADE);



	CREATE TABLE TIPO_POR_FABRICANTE
(CODIGO INTEGER PRIMARY KEY,
NUM_FABRICANTE INTEGER, 
COD_TIPO INTEGER,

FOREIGN KEY (NUM_FABRICANTE)
REFERENCES FABRICANTE (CODIGO)
ON DELETE SET NULL ON UPDATE CASCADE,


FOREIGN KEY (COD_TIPO)
REFERENCES TIPO (CODIGO)
ON DELETE SET NULL ON UPDATE CASCADE);



CREATE TABLE COMPRADOR
(MATRICULA INTEGER PRIMARY KEY,
NOME VARCHAR(50),
SEXO CHAR(1) CHECK(SEXO = 'M' OR SEXO = 'F'),
DT_NASC DATE,
FORMACAO VARCHAR(10));



	CREATE TABLE COMPRA
(NUMERO INTEGER PRIMARY KEY,
DT DATE,
COD_PRODUTO INTEGER,
MATR_COMPRADOR INTEGER,
VALOR FLOAT(10),

FOREIGN KEY (COD_PRODUTO)
REFERENCES PRODUTO (CODIGO)
ON DELETE SET NULL ON UPDATE CASCADE,

FOREIGN KEY (MATR_COMPRADOR)
REFERENCES COMPRADOR (MATRICULA)
ON DELETE SET NULL ON UPDATE CASCADE);



	CREATE TABLE HISTORICO_COMPRAS
(CODIGO INTEGER PRIMARY KEY,
MATRICULA_COMPRADOR INTEGER,
NUM_COMPRA INTEGER,

FOREIGN KEY (MATRICULA_COMPRADOR)
REFERENCES COMPRADOR (MATRICULA)
ON DELETE SET NULL ON UPDATE CASCADE,

FOREIGN KEY (NUM_COMPRA)
REFERENCES COMPRA (NUMERO)
ON DELETE SET NULL ON UPDATE CASCADE);



INSERT INTO TIPO VALUES(1, 'Comida');
INSERT INTO TIPO VALUES(2, 'Bebida');
INSERT INTO TIPO VALUES(3, 'Frikace');
INSERT INTO TIPO VALUES(4, 'lasanha');
INSERT INTO TIPO VALUES(5, 'frango');

Select * from tipo;

INSERT INTO FABRICANTE VALUES(7, 'UNIGRANRIO', '10020065598', '20026459', '123456789', 'RJ');
INSERT INTO FABRICANTE VALUES(8, 'PERDIGAO', '10220088598', '20058449', '98766789', 'SP');
INSERT INTO FABRICANTE VALUES(9, 'SADIA', '102888598', '20045449', '98766789', 'MT');
INSERT INTO FABRICANTE VALUES(10, 'FRIBOI', '10220088888', '20999449', '98766789', 'AM');
INSERT INTO FABRICANTE VALUES(11, 'FRIBOI 2.0', '10220088888', '20999449', '98766789', 'RJ');
INSERT INTO FABRICANTE VALUES(12, 'ABC', '10220088888', '20999449', '98766789', 'AM');

SELECT * FROM FABRICANTE;

INSERT INTO PRODUTO VALUES(15, 'MORTADELA', 'MUITO BOM', NULL, 9, 1, '9.00');
INSERT INTO PRODUTO VALUES(16, 'CARNE', 'CARNE CONFIAVEL TEM NOME', '05.11.2010', 10, 1, '9.00');
INSERT INTO PRODUTO VALUES(17, 'PAO', 'LEGAL','01.02.1997', 7, 2, '2.00');
INSERT INTO PRODUTO VALUES(18, 'PEIXE', 'DIFERENTE', '11.05.2017', 10, 3, '3.00');
INSERT INTO PRODUTO VALUES(19, 'SALMAO', 'DE AGUA DOCE', '11.06.2017', 8, 3, '6.00');
INSERT INTO PRODUTO VALUES(80, 'MACARRAO', 'DE AGUA DOCE', '11.06.2017', 11, 3, '6.00');
INSERT INTO PRODUTO VALUES(81, 'MOUSE', 'PC', '11.06.2017', 12, 5, '5000.00');


SELECT * FROM PRODUTO;

INSERT INTO TIPO_POR_FABRICANTE VALUES (20,10,5);
INSERT INTO TIPO_POR_FABRICANTE VALUES (21,8,5);
INSERT INTO TIPO_POR_FABRICANTE VALUES (22,8,4);
INSERT INTO TIPO_POR_FABRICANTE VALUES (23,7,1);
INSERT INTO TIPO_POR_FABRICANTE VALUES (24,9,2);


SELECT * FROM TIPO_POR_FABRICANTE;

INSERT INTO COMPRADOR VALUES(50, 'JOAO', 'M', '11.05.1998','NOFORMAÇÃO');
INSERT INTO COMPRADOR VALUES(51, 'MARTA', 'F', '11.05.1986','NÃO SEI');
INSERT INTO COMPRADOR VALUES(52, 'ERICK', 'M', '11.05.1975','SISTEMA');
INSERT INTO COMPRADOR VALUES(53, 'CAIQUE', 'M', '11.05.1980','NALFABETO');

SELECT *  FROM COMPRADOR;

SELECT * FROM COMPRA;

INSERT INTO COMPRA VALUES(001, '11.06.1991', 15, 50, '15.00');
INSERT INTO COMPRA VALUES(002, '11.06.1992', 16, 51, '35.00');
INSERT INTO COMPRA VALUES(003, '11.06.1993', 17, 52, '45.00');
INSERT INTO COMPRA VALUES(004, '11.06.1994', 18, 53, '85.00');
INSERT INTO COMPRA VALUES(005, '11.06.1995', 15, 50, '12.00');
INSERT INTO COMPRA VALUES(006, '11.06.1996', 16, 51, '11.00');
INSERT INTO COMPRA VALUES(007, '11.06.1997', 17, 52, '17.00');
INSERT INTO COMPRA VALUES(008, '11.06.1998', 18, 53, '25.00');
INSERT INTO COMPRA VALUES(009, '11.06.1999', 15, 50, '195.00');
INSERT INTO COMPRA VALUES(010, '11.06.1980', 15, 50, '5000.00');
INSERT INTO COMPRA VALUES(011, '11.06.1980', 81, 51, '5000.00');

SELECT * FROM HISTORICO_COMPRAS;

INSERT INTO HISTORICO_COMPRAS VALUES(21, 50, 001);
INSERT INTO HISTORICO_COMPRAS VALUES(22, 51, 002);
INSERT INTO HISTORICO_COMPRAS VALUES(23, 52, 003);
INSERT INTO HISTORICO_COMPRAS VALUES(24, 53, 005);
INSERT INTO HISTORICO_COMPRAS VALUES(25, 50, 009);
INSERT INTO HISTORICO_COMPRAS VALUES(26, 51, 010);


SELECT * FROM PRODUTO;
SELECT * FROM FABRICANTE;

/*EXERCICIO 1*/
SELECT PRODUTO.NOME, PRODUTO.DESCRICAO FROM PRODUTO,FABRICANTE WHERE PRODUTO.VALOR > 5 AND FABRICANTE.UF = 'SP' AND FABRICANTE.CODIGO = PRODUTO.NUM_FABRICANTE;

/* EXERCICIO 2 */
SELECT EXTRACT (YEAR FROM AGE(COMPRADOR.DT_NASC)) FROM COMPRADOR

/* EXERCICIO 3 */

SELECT SUM (VALOR) FROM COMPRA

SELECT MAX (VALOR) FROM COMPRA

SELECT MIN (VALOR) FROM COMPRA

/* EXE 4 */

SELECT * FROM FABRICANTE ORDER BY RAZAO_SOCIAL;

/* EXE 5*/
SELECT * FROM COMPRA

SELECT COMPRADOR.NOME 
FROM COMPRADOR, FABRICANTE, COMPRA, PRODUTO 
WHERE COMPRA.VALOR > 1500 AND PRODUTO.CODIGO = COMPRA.COD_PRODUTO AND COMPRA.MATR_COMPRADOR = COMPRADOR.MATRICULA AND PRODUTO.NUM_FABRICANTE = FABRICANTE.CODIGO AND FABRICANTE.RAZAO_SOCIAL = 'ABC'

/*EXE 6*/

DELETE FROM TIPO WHERE CODIGO = 2;
SELECT * FROM TIPO;

/* EXE 7*/

UPDATE FABRICANTE SET RAZAO_SOCIAL = 'CORUJA' WHERE CODIGO = 8;
SELECT * FROM FABRICANTE;

/* EXE 8*/
ALTER TABLE TIPO ADD UNIDADE INT
UPDATE TIPO SET UNIDADE = 1 WHERE CODIGO = 1
SELECT * FROM TIPO

/* EXE 9 */
 


/* EXE 10*/